# デバッグのベストプラクティス

## 概要

効率的なデバッグは、高品質なソフトウェア開発において不可欠なスキルです。このドキュメントでは、システマティックなデバッグアプローチから、NestJSでの効果的なロギング方法まで、デバッグのベストプラクティスを紹介します。

## システマティックなデバッグアプローチ

### 根本原因分析（Root Cause Analysis）

エラーが発生した際には、以下のステップに従ってください：

1. **問題の明確化**: エラーの正確な症状を特定し、再現方法を確立する
2. **仮説の列挙**: エラーの原因となり得る可能性を5〜7個挙げる（重要）
3. **優先順位付け**: 最も可能性の高いものから順に調査する
4. **系統的検証**: 各仮説を検証するために適切なログを戦略的に配置する
5. **検証と修正**: 根本原因を特定したら、修正し、テストで確認する
6. **知見の文書化**: 解決した問題と学びを共有する

### 仮説駆動型デバッグの例

例えば、APIエンドポイントがタイムアウトする場合：

1. **データベースの遅延**（可能性：高）- DBクエリのパフォーマンス問題
2. **外部APIの応答遅延**（可能性：高）- サードパーティサービスの問題
3. **メモリリーク**（可能性：中）- リソース枯渇
4. **非効率なアルゴリズム**（可能性：中）- 計算コストの高い処理
5. **ネットワーク問題**（可能性：中）- 接続やDNS解決の問題
6. **並行処理の競合状態**（可能性：低）- ロックや同期の問題
7. **設定ミス**（可能性：低）- タイムアウト値などの設定パラメータの問題

最も可能性の高い原因から順に、適切なログを配置して検証します。

## デバッグ結果報告フォーマット

```markdown
## 問題

- **症状**: [簡潔な説明]
- **影響**: [影響範囲]

## 仮説一覧

## 検証結果（検証済みでない場合はユーザーに検証を促して終了する。）

### 原因

[特定された根本原因の簡潔な説明]

## 解決策

[実施した修正の概要]

## 次のステップ

[フォローアップとして必要なアクション]
```
